name: Telegram Test Message (One Shot)

on:
  workflow_dispatch:  # –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é

jobs:
  send-test-message:
    runs-on: ubuntu-latest
    steps:
      - name: Send "–ü—Ä–∏–≤–µ—Ç!" to Telegram channel
        run: |
          curl -s -X POST \
            "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
            -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
            -d text="–ü—Ä–∏–≤–µ—Ç! üéâ\n\n–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç GitHub Actions.\n–ï—Å–ª–∏ —Ç—ã —ç—Ç–æ –≤–∏–¥–∏—à—å ‚Äî –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç!" \
            -d disable_notification=false

      - name: Disable this workflow after success
        run: |
          echo "–û—Ç–∫–ª—é—á–∞–µ–º workflow –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏..."
          curl -X PATCH \
            -H "Authorization: Bearer ${{ secrets.GITHUB_TOKEN }}" \
            -H "Accept: application/vnd.github.v3+json" \
            "https://api.github.com/repos/${{ github.repository }}/actions/workflows/timetable-monitor.yml/disable"